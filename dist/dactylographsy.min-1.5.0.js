!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=c(2),f=d(e),g=c(10),h=d(g);h["default"].polyfill(),"undefined"!=typeof window&&(window.dactylographsy=new f["default"]({autorun:!0}))},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(3),h=d(g),i=c(7),j=d(i),k=c(4),l=d(k),m=c(5),n=d(m),o=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e(this,a);var c=b.autorun,d=void 0===c?!1:c,f=b.enableLogging,g=void 0===f?!1:f;this.log=new l["default"]((0,n["default"])("dactylographsy-enableLogging",g)),this.hookIntoDom(),this.readConfiguration(),this.cache=new h["default"]({appPrefix:this.config.appPrefix}),d&&this.run()}return f(a,[{key:"hookIntoDom",value:function(){"undefined"!=typeof document&&(this.executingScript=document.getElementById("dactylographsy"),this.injectInto=document.body||document.head||document.getElementsByTagName("script")[0])}},{key:"readConfiguration",value:function(){this.manifestUrls=this.readAttrOnScript("manifests"),this.config=this.readAttrOnScript("config")}},{key:"refresh",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];return Promise.all(this.manifestUrls.map(function(b){return new i.Manifest(b,a.config).get()})).then(function(c){return a.log.info("Fetched all manifests, "+c.length+" in total."),a.cache.set(c,"manifests","manifests"),new j["default"](b?a.injectInto:void 0,c,a.config).inject()})}},{key:"restore",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];return this.cache.get("manifests").then(function(c){return a.log.info("Resotring with manifests in cache later refreshing via network (delayed)."),new j["default"](b?a.injectInto:void 0,c,a.config).inject()})}},{key:"readAttrOnScript",value:function(a){if(!this.executingScript)return!1;var b=this.executingScript.getAttribute("data-"+a);return b?JSON.parse(b):void 0}},{key:"run",value:function(){var a=this,b=(0,n["default"])("dactylographsy-ttl",this.config.ttl);return b&&this.cache.get("clt",0).then(function(c){c>=b?(a.log.info("Flushing cache due to exeeding TTL of "+b+"."),a.cache.flush()):a.cache.set(++c,"plain","clt")}),this.config.cacheOnly?this.refresh(!1):this.config.cachedManifests===!1||this.config.verification===!0?this.refresh():this.restore().then(function(b){var c=a.config.refreshDelay,d=void 0===c?5e3:c;return new Promise(function(c,e){window.setTimeout(function(){a.refresh(b).then(c,e)},d)})})["catch"](function(){return a.log.info("No manifests in cache, refreshing via network."),a.refresh()})}}]),a}();b["default"]=o},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(4),h=d(g),i=c(5),j=d(i),k=c(6),l=d(k),m=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e(this,a);var c="__dactylographsy",d=b.enableLogging,f=void 0===d?!1:d;this.log=new h["default"]((0,j["default"])("dactylographsy-enableLogging",f)),this.hasher=new l["default"]("SHA-256","TEXT"),this.options=b,this.cachePrefix=this.options.cachePrefix||c,this.isSupported=this.supported(),this.options.appPrefix?this.cachePrefix=this.cachePrefix+"--"+this.options.appPrefix:this.options.cachePrefix||(this.cachePrefix+="__")}return f(a,[{key:"getPrefix",value:function(){return this.cachePrefix}},{key:"isItemValid",value:function(a,b){return"string"!=typeof a?!1:(this.hasher.update(a),this.hasher.getHash("HEX")===b)}},{key:"parse",value:function(a){return JSON.parse(a)}},{key:"get",value:function(a,b){var c=this,d=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return new Promise(function(e,f){c.isSupported||f();var g=localStorage.getItem(c.cachePrefix+"-"+a);if(null===g&&void 0!==b)return c.set(b,"plain",a),void e(b);if(null!==g&&d!==!1){var h=c.parse(g);c.log.info("Found item with key: "+a+" in cache which needs validation..."),c.isItemValid(h.code,d)?(c.log.info("...matches expected sha256 "+d+"."),e(h.code)):(c.log.info("...does not match expected sha256 "+d+" - pruning."),c.remove(a),f())}else g?(c.log.info("Found item with key: "+a+" in cache."),e(c.parse(g).code)):(c.log.info("Couldn't find item with key: "+a+" in cache."),f())})}},{key:"has",value:function(a){return this.isSupported?null!==localStorage.getItem(this.cachePrefix+"-"+a):!1}},{key:"remove",value:function(a){return this.isSupported?localStorage.removeItem(this.cachePrefix+"-"+a):!1}},{key:"set",value:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(!this.isSupported)return!1;d&&this.dedupe(d);var e={now:+new Date,url:c,code:a,type:b,singularBy:"string"==typeof d?d:void 0};return localStorage.setItem(this.cachePrefix+"-"+c,JSON.stringify(e)),e}},{key:"flush",value:function(){if(!this.isSupported)return!1;for(var a in localStorage)a.indexOf(this.cachePrefix)>=0&&(this.log.log("Removing item "+a+" requested by flush."),localStorage.removeItem(a));return!0}},{key:"supported",value:function(){var a="__dactylographsy__feature-detection";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return this.log.warn("Localstorage not supported in browser - no caching!"),!1}}},{key:"dedupe",value:function(a){for(var b in localStorage){var c=b.indexOf(this.cachePrefix)>=0,d=void 0;c&&(d=JSON.parse(localStorage.getItem(b)),"string"==typeof a&&"string"==typeof d.singularBy&&d.singularBy===a&&(this.log.log("Deduping by "+a+" before adding dupe in "+b+"."),localStorage.removeItem(b)))}}}]),a}();b["default"]=m},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];c(this,a),this.enabled=b,this.enabled&&(this.console=window.console)}return d(a,[{key:"log",value:function(){if(this.enabled){var a;(a=this.console).log.apply(a,arguments)}}},{key:"info",value:function(){if(this.enabled){var a;(a=this.console).info.apply(a,arguments)}}},{key:"warn",value:function(){if(this.enabled){var a;(a=this.console).warn.apply(a,arguments)}}},{key:"debug",value:function(){if(this.enabled){var a;(a=this.console).debug.apply(a,arguments)}}},{key:"error",value:function(){if(this.enabled){var a;(a=this.console).error.apply(a,arguments)}}}]),a}();b["default"]=e},function(a,b){"use strict";function c(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1],c=arguments.length<=2||void 0===arguments[2]?window.location.search:arguments[2],e=d(c);return e.hasOwnProperty(a)?e[a]:b}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c;var d=function(a){var b=a,c=/[?&;](.+?)=([^&;]+)/g,d=void 0,e=void 0;if(d={},b)for(;e=c.exec(b);)d[e[1]]=decodeURIComponent(e[2]);return d}},function(a,b,c){var d;!function(e){function f(a,b,c){var d,e,f,g,h,i,j,p,q=0,r=[],s=0,t=!1,u=!1,v=[],w=[],x=!1;if(c=c||{},d=c.encoding||"UTF8",p=c.numRounds||1,f=o(b,d),p!==parseInt(p,10)||1>p)throw Error("numRounds must a integer >= 1");if("SHA-1"===a)h=512,i=M,j=N,g=160;else if(i=function(b,c){return O(b,c,a)},j=function(b,c,d,e){var f,g;if("SHA-224"===a||"SHA-256"===a)f=(c+65>>>9<<4)+15,g=16;else{if("SHA-384"!==a&&"SHA-512"!==a)throw Error("Unexpected error in SHA-2 implementation");f=(c+129>>>10<<5)+31,g=32}for(;b.length<=f;)b.push(0);for(b[c>>>5]|=128<<24-c%32,b[f]=c+d,d=b.length,c=0;d>c;c+=g)e=O(b.slice(c,c+g),e,a);if("SHA-224"===a)b=[e[0],e[1],e[2],e[3],e[4],e[5],e[6]];else if("SHA-256"===a)b=e;else if("SHA-384"===a)b=[e[0].a,e[0].b,e[1].a,e[1].b,e[2].a,e[2].b,e[3].a,e[3].b,e[4].a,e[4].b,e[5].a,e[5].b];else{if("SHA-512"!==a)throw Error("Unexpected error in SHA-2 implementation");b=[e[0].a,e[0].b,e[1].a,e[1].b,e[2].a,e[2].b,e[3].a,e[3].b,e[4].a,e[4].b,e[5].a,e[5].b,e[6].a,e[6].b,e[7].a,e[7].b]}return b},"SHA-224"===a)h=512,g=224;else if("SHA-256"===a)h=512,g=256;else if("SHA-384"===a)h=1024,g=384;else{if("SHA-512"!==a)throw Error("Chosen SHA variant is not supported");h=1024,g=512}e=L(a),this.setHMACKey=function(b,c,f){var g;if(!0===u)throw Error("HMAC key already set");if(!0===t)throw Error("Cannot set HMAC key after finalizing hash");if(!0===x)throw Error("Cannot set HMAC key after calling update");if(d=(f||{}).encoding||"UTF8",c=o(c,d)(b),b=c.binLen,c=c.value,g=h>>>3,f=g/4-1,b/8>g){for(c=j(c,b,0,L(a));c.length<=f;)c.push(0);c[f]&=4294967040}else if(g>b/8){for(;c.length<=f;)c.push(0);c[f]&=4294967040}for(b=0;f>=b;b+=1)v[b]=909522486^c[b],w[b]=1549556828^c[b];e=i(v,e),q=h,u=!0},this.update=function(a){var b,c,d,g=0,j=h>>>5;for(b=f(a,r,s),a=b.binLen,c=b.value,b=a>>>5,d=0;b>d;d+=j)a>=g+h&&(e=i(c.slice(d,d+j),e),g+=h);q+=g,r=c.slice(g>>>5),s=a%h,x=!0},this.getHash=function(b,c){var d,f,h;if(!0===u)throw Error("Cannot call getHash after setting HMAC key");switch(h=n(c),b){case"HEX":d=function(a){return k(a,h)};break;case"B64":d=function(a){return l(a,h)};break;case"BYTES":d=m;break;default:throw Error("format must be HEX, B64, or BYTES")}if(!1===t)for(e=j(r,s,q,e),f=1;p>f;f+=1)e=j(e,g,0,L(a));return t=!0,d(e)},this.getHMAC=function(b,c){var d,f,o;if(!1===u)throw Error("Cannot call getHMAC without first setting HMAC key");switch(o=n(c),b){case"HEX":d=function(a){return k(a,o)};break;case"B64":d=function(a){return l(a,o)};break;case"BYTES":d=m;break;default:throw Error("outputFormat must be HEX, B64, or BYTES")}return!1===t&&(f=j(r,s,q,e),e=i(w,L(a)),e=j(f,g,h,e)),t=!0,d(e)}}function g(a,b){this.a=a,this.b=b}function h(a,b,c){var d,e,f,g,h,i=a.length;if(b=b||[0],c=c||0,h=c>>>3,0!==i%2)throw Error("String of HEX type must be in byte increments");for(d=0;i>d;d+=2){if(e=parseInt(a.substr(d,2),16),isNaN(e))throw Error("String of HEX type contains invalid characters");for(g=(d>>>1)+h,f=g>>>2;b.length<=f;)b.push(0);b[f]|=e<<8*(3-g%4)}return{value:b,binLen:4*i+c}}function i(a,b,c){var d,e,f,g,h=[],h=b||[0];for(c=c||0,e=c>>>3,d=0;d<a.length;d+=1)b=a.charCodeAt(d),g=d+e,f=g>>>2,h.length<=f&&h.push(0),h[f]|=b<<8*(3-g%4);return{value:h,binLen:8*a.length+c}}function j(a,b,c){var d,e,f,g,h,i,j=[],k=0,j=b||[0];if(c=c||0,b=c>>>3,-1===a.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(e=a.indexOf("="),a=a.replace(/\=/g,""),-1!==e&&e<a.length)throw Error("Invalid '=' found in base-64 string");for(e=0;e<a.length;e+=4){for(h=a.substr(e,4),f=g=0;f<h.length;f+=1)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(h[f]),g|=d<<18-6*f;for(f=0;f<h.length-1;f+=1){for(i=k+b,d=i>>>2;j.length<=d;)j.push(0);j[d]|=(g>>>16-8*f&255)<<8*(3-i%4),k+=1}}return{value:j,binLen:8*k+c}}function k(a,b){var c,d,e="",f=4*a.length;for(c=0;f>c;c+=1)d=a[c>>>2]>>>8*(3-c%4),e+="0123456789abcdef".charAt(d>>>4&15)+"0123456789abcdef".charAt(15&d);return b.outputUpper?e.toUpperCase():e}function l(a,b){var c,d,e,f="",g=4*a.length;for(c=0;g>c;c+=3)for(e=c+1>>>2,d=a.length<=e?0:a[e],e=c+2>>>2,e=a.length<=e?0:a[e],e=(a[c>>>2]>>>8*(3-c%4)&255)<<16|(d>>>8*(3-(c+1)%4)&255)<<8|e>>>8*(3-(c+2)%4)&255,d=0;4>d;d+=1)f+=8*c+6*d<=32*a.length?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6*(3-d)&63):b.b64Pad;return f}function m(a){var b,c,d="",e=4*a.length;for(b=0;e>b;b+=1)c=a[b>>>2]>>>8*(3-b%4)&255,d+=String.fromCharCode(c);return d}function n(a){var b={outputUpper:!1,b64Pad:"="};if(a=a||{},b.outputUpper=a.outputUpper||!1,!0===a.hasOwnProperty("b64Pad")&&(b.b64Pad=a.b64Pad),"boolean"!=typeof b.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof b.b64Pad)throw Error("Invalid b64Pad formatting option");return b}function o(a,b){var c;switch(b){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(a){case"HEX":c=h;break;case"TEXT":c=function(a,c,d){var e,f,g,h,i,j=[],k=[],l=0,j=c||[0];if(c=d||0,g=c>>>3,"UTF8"===b)for(e=0;e<a.length;e+=1)for(d=a.charCodeAt(e),k=[],128>d?k.push(d):2048>d?(k.push(192|d>>>6),k.push(128|63&d)):55296>d||d>=57344?k.push(224|d>>>12,128|d>>>6&63,128|63&d):(e+=1,d=65536+((1023&d)<<10|1023&a.charCodeAt(e)),k.push(240|d>>>18,128|d>>>12&63,128|d>>>6&63,128|63&d)),f=0;f<k.length;f+=1){for(i=l+g,h=i>>>2;j.length<=h;)j.push(0);j[h]|=k[f]<<8*(3-i%4),l+=1}else if("UTF16BE"===b||"UTF16LE"===b)for(e=0;e<a.length;e+=1){for(d=a.charCodeAt(e),"UTF16LE"===b&&(f=255&d,d=f<<8|d>>>8),i=l+g,h=i>>>2;j.length<=h;)j.push(0);j[h]|=d<<8*(2-i%4),l+=2}return{value:j,binLen:8*l+c}};break;case"B64":c=j;break;case"BYTES":c=i;break;default:throw Error("format must be HEX, TEXT, B64, or BYTES")}return c}function p(a,b){return a<<b|a>>>32-b}function q(a,b){return a>>>b|a<<32-b}function r(a,b){var c=null,c=new g(a.a,a.b);return c=32>=b?new g(c.a>>>b|c.b<<32-b&4294967295,c.b>>>b|c.a<<32-b&4294967295):new g(c.b>>>b-32|c.a<<64-b&4294967295,c.a>>>b-32|c.b<<64-b&4294967295)}function s(a,b){var c=null;return c=32>=b?new g(a.a>>>b,a.b>>>b|a.a<<32-b&4294967295):new g(0,a.a>>>b-32)}function t(a,b,c){return a&b^~a&c}function u(a,b,c){return new g(a.a&b.a^~a.a&c.a,a.b&b.b^~a.b&c.b)}function v(a,b,c){return a&b^a&c^b&c}function w(a,b,c){return new g(a.a&b.a^a.a&c.a^b.a&c.a,a.b&b.b^a.b&c.b^b.b&c.b)}function x(a){return q(a,2)^q(a,13)^q(a,22)}function y(a){var b=r(a,28),c=r(a,34);return a=r(a,39),new g(b.a^c.a^a.a,b.b^c.b^a.b)}function z(a){return q(a,6)^q(a,11)^q(a,25)}function A(a){var b=r(a,14),c=r(a,18);return a=r(a,41),new g(b.a^c.a^a.a,b.b^c.b^a.b)}function B(a){return q(a,7)^q(a,18)^a>>>3}function C(a){var b=r(a,1),c=r(a,8);return a=s(a,7),new g(b.a^c.a^a.a,b.b^c.b^a.b)}function D(a){return q(a,17)^q(a,19)^a>>>10}function E(a){var b=r(a,19),c=r(a,61);return a=s(a,6),new g(b.a^c.a^a.a,b.b^c.b^a.b)}function F(a,b){var c=(65535&a)+(65535&b);return((a>>>16)+(b>>>16)+(c>>>16)&65535)<<16|65535&c}function G(a,b,c,d){var e=(65535&a)+(65535&b)+(65535&c)+(65535&d);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)&65535)<<16|65535&e}function H(a,b,c,d,e){var f=(65535&a)+(65535&b)+(65535&c)+(65535&d)+(65535&e);return((a>>>16)+(b>>>16)+(c>>>16)+(d>>>16)+(e>>>16)+(f>>>16)&65535)<<16|65535&f}function I(a,b){var c,d,e;return c=(65535&a.b)+(65535&b.b),d=(a.b>>>16)+(b.b>>>16)+(c>>>16),e=(65535&d)<<16|65535&c,c=(65535&a.a)+(65535&b.a)+(d>>>16),d=(a.a>>>16)+(b.a>>>16)+(c>>>16),new g((65535&d)<<16|65535&c,e)}function J(a,b,c,d){var e,f,h;return e=(65535&a.b)+(65535&b.b)+(65535&c.b)+(65535&d.b),f=(a.b>>>16)+(b.b>>>16)+(c.b>>>16)+(d.b>>>16)+(e>>>16),h=(65535&f)<<16|65535&e,e=(65535&a.a)+(65535&b.a)+(65535&c.a)+(65535&d.a)+(f>>>16),f=(a.a>>>16)+(b.a>>>16)+(c.a>>>16)+(d.a>>>16)+(e>>>16),new g((65535&f)<<16|65535&e,h)}function K(a,b,c,d,e){var f,h,i;return f=(65535&a.b)+(65535&b.b)+(65535&c.b)+(65535&d.b)+(65535&e.b),h=(a.b>>>16)+(b.b>>>16)+(c.b>>>16)+(d.b>>>16)+(e.b>>>16)+(f>>>16),i=(65535&h)<<16|65535&f,f=(65535&a.a)+(65535&b.a)+(65535&c.a)+(65535&d.a)+(65535&e.a)+(h>>>16),h=(a.a>>>16)+(b.a>>>16)+(c.a>>>16)+(d.a>>>16)+(e.a>>>16)+(f>>>16),new g((65535&h)<<16|65535&f,i)}function L(a){var b,c;if("SHA-1"===a)a=[1732584193,4023233417,2562383102,271733878,3285377520];else switch(b=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],a){case"SHA-224":a=b;break;case"SHA-256":a=c;break;case"SHA-384":a=[new g(3418070365,b[0]),new g(1654270250,b[1]),new g(2438529370,b[2]),new g(355462360,b[3]),new g(1731405415,b[4]),new g(41048885895,b[5]),new g(3675008525,b[6]),new g(1203062813,b[7])];break;case"SHA-512":a=[new g(c[0],4089235720),new g(c[1],2227873595),new g(c[2],4271175723),new g(c[3],1595750129),new g(c[4],2917565137),new g(c[5],725511199),new g(c[6],4215389547),new g(c[7],327033209)];break;default:throw Error("Unknown SHA variant")}return a}function M(a,b){var c,d,e,f,g,h,i,j=[];for(c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],i=0;80>i;i+=1)j[i]=16>i?a[i]:p(j[i-3]^j[i-8]^j[i-14]^j[i-16],1),h=20>i?H(p(c,5),d&e^~d&f,g,1518500249,j[i]):40>i?H(p(c,5),d^e^f,g,1859775393,j[i]):60>i?H(p(c,5),v(d,e,f),g,2400959708,j[i]):H(p(c,5),d^e^f,g,3395469782,j[i]),g=f,f=e,e=p(d,30),d=c,c=h;return b[0]=F(c,b[0]),b[1]=F(d,b[1]),b[2]=F(e,b[2]),b[3]=F(f,b[3]),b[4]=F(g,b[4]),b}function N(a,b,c,d){var e;for(e=(b+65>>>9<<4)+15;a.length<=e;)a.push(0);for(a[b>>>5]|=128<<24-b%32,a[e]=b+c,c=a.length,b=0;c>b;b+=16)d=M(a.slice(b,b+16),d);return d}function O(a,b,c){var d,e,f,h,i,j,k,l,m,n,o,p,q,r,s,L,M,N,O,R,S,T,U,V=[];if("SHA-224"===c||"SHA-256"===c)n=64,p=1,T=Number,q=F,r=G,s=H,L=B,M=D,N=x,O=z,S=v,R=t,U=P;else{if("SHA-384"!==c&&"SHA-512"!==c)throw Error("Unexpected error in SHA-2 implementation");n=80,p=2,T=g,q=I,r=J,s=K,L=C,M=E,N=y,O=A,S=w,R=u,U=Q}for(c=b[0],d=b[1],e=b[2],f=b[3],h=b[4],i=b[5],j=b[6],k=b[7],o=0;n>o;o+=1)16>o?(m=o*p,l=a.length<=m?0:a[m],m=a.length<=m+1?0:a[m+1],V[o]=new T(l,m)):V[o]=r(M(V[o-2]),V[o-7],L(V[o-15]),V[o-16]),l=s(k,O(h),R(h,i,j),U[o],V[o]),m=q(N(c),S(c,d,e)),k=j,j=i,i=h,h=q(f,l),f=e,e=d,d=c,c=q(l,m);return b[0]=q(c,b[0]),b[1]=q(d,b[1]),b[2]=q(e,b[2]),b[3]=q(f,b[3]),b[4]=q(h,b[4]),b[5]=q(i,b[5]),b[6]=q(j,b[6]),b[7]=q(k,b[7]),b}var P,Q;P=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Q=[new g(P[0],3609767458),new g(P[1],602891725),new g(P[2],3964484399),new g(P[3],2173295548),new g(P[4],4081628472),new g(P[5],3053834265),new g(P[6],2937671579),new g(P[7],3664609560),new g(P[8],2734883394),new g(P[9],1164996542),new g(P[10],1323610764),new g(P[11],3590304994),new g(P[12],4068182383),new g(P[13],991336113),new g(P[14],633803317),new g(P[15],3479774868),new g(P[16],2666613458),new g(P[17],944711139),new g(P[18],2341262773),new g(P[19],2007800933),new g(P[20],1495990901),new g(P[21],1856431235),new g(P[22],3175218132),new g(P[23],2198950837),new g(P[24],3999719339),new g(P[25],766784016),new g(P[26],2566594879),new g(P[27],3203337956),new g(P[28],1034457026),new g(P[29],2466948901),new g(P[30],3758326383),new g(P[31],168717936),new g(P[32],1188179964),new g(P[33],1546045734),new g(P[34],1522805485),new g(P[35],2643833823),new g(P[36],2343527390),new g(P[37],1014477480),new g(P[38],1206759142),new g(P[39],344077627),new g(P[40],1290863460),new g(P[41],3158454273),new g(P[42],3505952657),new g(P[43],106217008),new g(P[44],3606008344),new g(P[45],1432725776),new g(P[46],1467031594),new g(P[47],851169720),new g(P[48],3100823752),new g(P[49],1363258195),new g(P[50],3750685593),new g(P[51],3785050280),new g(P[52],3318307427),new g(P[53],3812723403),new g(P[54],2003034995),new g(P[55],3602036899),new g(P[56],1575990012),new g(P[57],1125592928),new g(P[58],2716904306),new g(P[59],442776044),new g(P[60],593698344),new g(P[61],3733110249),new g(P[62],2999351573),new g(P[63],3815920427),new g(3391569614,3928383900),new g(3515267271,566280711),new g(3940187606,3454069534),new g(4118630271,4000239992),new g(116418474,1914138554),new g(174292421,2731055270),new g(289380356,3203993006),new g(460393269,320620315),new g(685471733,587496836),new g(852142971,1086792851),new g(1017036298,365543100),new g(1126000580,2618297676),new g(1288033470,3409855158),new g(1501505948,4234509866),new g(1607167915,987167468),new g(1816402316,1246189591)],d=function(){return f}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))}(this)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0}),b.Manifest=void 0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(8),h=c(9),i=d(h),j=c(4),k=d(j),l=c(5),m=d(l),n=(b.Manifest=function(){function a(b,c){e(this,a);var d=c.enableLogging,f=void 0===d?!1:d;this.log=new k["default"]((0,m["default"])("dactylographsy-enableLogging",f)),this.url=b}return f(a,[{key:"get",value:function(){var a=this;return(new i["default"]).get(this.url).then(function(b){var c=b.text,d=b.url;return a.log.info("Fetched manifest from url: "+d+"."),JSON.parse(c)},function(b){a.log.error("Could not fetch manifest with url: "+b.responseURL+"!")})}}]),a}(),function(){function a(b,c){var d=this,f=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];e(this,a);var g=f.enableLogging,h=void 0===g?!1:g;this.log=new k["default"]((0,m["default"])("dactylographsy-enableLogging",h)),this.manifests={},this.injectInto=b,c.forEach(function(a){d.manifests[a["package"]]=a}),this.options=f,this.prefix=f.prefix,this.order=f.order}return f(a,[{key:"inject",value:function(){var a=this,b=function d(a){return a.reduce(function(a,b){return a.concat(Array.isArray(b)?d(b):b)},[])},c=function e(b){var c=arguments.length<=1||void 0===arguments[1]?0:arguments[1],d=b[c];void 0!==d&&(d.getAttribute("data-dactylographsy-uncached-js")?(a.injectInto&&(a.log.info("Injecting tag:",d),a.injectInto.appendChild(d)),d.addEventListener("load",function(){e(b,++c)}),d.addEventListener("error",function(){e(b,++c)})):(a.injectInto&&a.injectInto.appendChild(d),e(b,++c)))};return Promise.all(this.order.map(function(b){return a.manifests[b]?a.injectManifest(a.manifests[b]):(a.log.error("Couldn't find package "+b+" from injection order."),Promise.reject())})).then(function(a){var d=b(a);return c(d),Promise.resolve(d)})}},{key:"injectManifest",value:function(a){var b=this,c=Object.keys(a.hashes);return Promise.all(c.map(function(c){var d=a.hashes[c],e=void 0;return e=[a.rootUrl,a.packageUrl].filter(function(a){return void 0!==a&&null!==a}).join("/"),b.injectDependency(d,e)}))}},{key:"injectDependency",value:function(a,b){switch(a.extension){case".css":return new g.Css(void 0,this.options).inject(this.urls(a,b));case".js":return new g.Js(void 0,this.options).inject(this.urls(a,b));default:Promise.resolve(!1)}}},{key:"basename",value:function(a){return a.replace(/.*\/|\.[^.]*$/g,"")}},{key:"urls",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=this.basename(a.file),d=void 0;return d=[this.prefix,b,a.path].filter(function(a){return void 0!==a&&null!==a}).join("/"),{hash:a.hash,printed:"/"+d+"/"+c+"-"+a.hash+a.extension,raw:"/"+d+"/"+c+a.extension,singularBy:"/"+d+"/"+c+a.extension}}}]),a}());b["default"]=n},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0}),b.Css=b.Js=void 0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(3),h=d(g),i=c(9),j=d(i),k=c(4),l=d(k),m=c(5),n=d(m),o=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,a);var d=c.enableLogging,f=void 0===d?!1:d,g=c.verification,i=void 0===g?!1:g;f=(0,n["default"])("dactylographsy-enableLogging",f),this.injectInto=b,this.cache=new h["default"]({appPrefix:c.appPrefix,enableLogging:f}),this.cacheDelay=c.cacheDelay||5e3,this.verification=i,this.log=new l["default"](f)}return f(a,[{key:"injectWithText",value:function(a,b){var c=this;return new Promise(function(d){var e=document.createElement("script");c.log.info("Creating <script />-tag with text for "+b+"."),e.defer=!1,e.async=!1,e.setAttribute("data-dactylographsy-url",b),e.text="\n        "+a+"\n        //# sourceURL="+b+"\n      ",c.injectInto?(c.log.info("Injecting <script />-tag with url: "+b+"."),d(c.injectInto.appendChild(e))):d(e)})}},{key:"injectWithUrl",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?"printed":arguments[1];return new Promise(function(d){var e=document.createElement("script"),f=a[c];b.log.info("Creating <script />-tag with url: "+f+"."),e.async=!1,e.defer=!1,e.setAttribute("data-dactylographsy-url",f),e.setAttribute("data-dactylographsy-uncached-js",!0),e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,b.ensureCache(f,a.singularBy,b.cacheDelay))}:(e.onload=function(){"printed"===c&&b.ensureCache(f,a.singularBy,b.cacheDelay)},e.onerror=function(){b.log.info("Could not fetch JavaScript from "+f+" - falling back to unprinted version."),"printed"===c&&b.injectWithUrl(a,"raw")}),e.src=f,b.injectInto?(b.log.info("Injecting <script />-tag with url: "+f+"."),d(b.injectInto.appendChild(e))):("printed"===c&&b.ensureCache(f,a.singularBy,b.cacheDelay),d(e))})}},{key:"ensureCache",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],d=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return new Promise(function(e,f){b.cache.has(a)&&e(),b.log.info("Loading JavaScript from "+a+" for cache in "+d+"."),window.setTimeout(function(){return(new j["default"]).get(a).then(function(d){var f=d.text;b.cache.set(f,"js",a,c),b.log.info("Loaded JavaScript from "+a+" now cached."),e()})["catch"](function(){b.log.info("Failed attempting to cache JavaScript from "+a+".")})},d)})}},{key:"hash",value:function(a){return this.verification===!0?a:!1}},{key:"inject",value:function(a){var b=this;return this.cache.get(a.printed,void 0,this.hash(a.hash)).then(function(c){return b.injectWithText(c,a.printed)},function(){return b.injectWithUrl(a)})}}]),a}();b.Js=o;var p=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e(this,a);var d=c.enableLogging,f=void 0===d?!1:d,g=c.verification,i=void 0===g?!1:g;f=(0,n["default"])("dactylographsy-enableLogging",f),this.injectInto=b,this.cache=new h["default"]({appPrefix:c.appPrefix}),this.cacheDelay=c.cacheDelay||5e3,this.verification=i,this.log=new l["default"](f)}return f(a,[{key:"ensureCache",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],d=arguments.length<=2||void 0===arguments[2]?0:arguments[2];return new Promise(function(e){b.cache.has(a)&&e(),b.log.info("Loading CSS from "+a+" for cache in "+d+"."),window.setTimeout(function(){return(new j["default"]).get(a).then(function(d){var f=d.text;b.cache.set(f,"css",a,c),b.log.info("Loaded CSS from "+a+" now cached."),e()})["catch"](function(){b.log.info("Failed attempting to cache CSS from "+a+".")})},d)})}},{key:"injectWithUrl",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?"printed":arguments[1];return new Promise(function(d){var e=document.createElement("link"),f=a[c];b.log.info("Creating <link />-tag with url: "+f+"."),e=document.createElement("link"),e.type="text/css",e.rel="stylesheet",e.setAttribute("data-dactylographsy-url",f),e.setAttribute("data-dactylographsy-uncached-css",!0),e.href=f,"printed"===c&&b.ensureCache(f,a.singularBy,b.cacheDelay)["catch"](function(){b.log.info("Could not fetch CSS from "+f+" - falling back to unprinted version."),b.injectWithUrl(a,"raw")}),b.injectInto?(b.log.info("Injecting <link />-tag with url: "+f+"."),d(b.injectInto.appendChild(e))):d(e)})}},{key:"injectWithText",value:function(a,b){var c=this;return new Promise(function(d){var e=document.createElement("link");c.log.info("Creating <link />-tag with text for url: "+b+"."),e=document.createElement("style"),e.setAttribute("data-dactylographsy-url",b),e.textContent=a,c.injectInto?(c.log.info("Injecting <link />-tag with url: "+b+"."),d(c.injectInto.appendChild(e))):d(e)})}},{key:"hash",value:function(a){return this.verification===!0?a:!1}},{key:"inject",value:function(a){var b=this;return this.cache.get(a.printed,void 0,this.hash(a.hash)).then(function(c){return b.injectWithText(c,a.printed)},function(){return b.injectWithUrl(a)})}}]),a}();b.Css=p},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){c(this,a)}return d(a,[{key:"get",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return new Promise(function(c,d){var e=new XMLHttpRequest;"withCredentials"in e?e.open("GET",a,!0):"undefined"!=typeof XDomainRequest?(e=new XDomainRequest,e.open("GET",a)):e=null,b.withCredentials&&(e.withCredentials=!0),e.onload=function(){e.status>=400?d(e):c({xhr:e,text:e.responseText,url:e.responseURL})},e.onerror=function(){d(e)},e.send()})}}]),a}();b["default"]=e},function(a,b,c){var d;(function(a,e,f){(function(){"use strict";function g(a){return"function"==typeof a||"object"==typeof a&&null!==a}function h(a){return"function"==typeof a}function i(a){V=a}function j(a){Z=a}function k(){return function(){a.nextTick(p)}}function l(){return function(){U(p)}}function m(){var a=0,b=new aa(p),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function n(){var a=new MessageChannel;return a.port1.onmessage=p,function(){a.port2.postMessage(0)}}function o(){return function(){setTimeout(p,1)}}function p(){for(var a=0;Y>a;a+=2){var b=da[a],c=da[a+1];b(c),da[a]=void 0,da[a+1]=void 0}Y=0}function q(){try{var a=c(13);return U=a.runOnLoop||a.runOnContext,l()}catch(b){return o()}}function r(a,b){var c=this,d=c._state;if(d===ha&&!a||d===ia&&!b)return this;var e=new this.constructor(t),f=c._result;if(d){var g=arguments[d-1];Z(function(){J(d,e,g,f)})}else F(c,e,a,b);return e}function s(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(t);return B(c,a),c}function t(){}function u(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function w(a){try{return a.then}catch(b){return ja.error=b,ja}}function x(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function y(a,b,c){Z(function(a){var d=!1,e=x(c,b,function(c){d||(d=!0,b!==c?B(a,c):D(a,c))},function(b){
d||(d=!0,E(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,E(a,e))},a)}function z(a,b){b._state===ha?D(a,b._result):b._state===ia?E(a,b._result):F(b,void 0,function(b){B(a,b)},function(b){E(a,b)})}function A(a,b,c){b.constructor===a.constructor&&c===ea&&constructor.resolve===fa?z(a,b):c===ja?E(a,ja.error):void 0===c?D(a,b):h(c)?y(a,b,c):D(a,b)}function B(a,b){a===b?E(a,u()):g(b)?A(a,b,w(b)):D(a,b)}function C(a){a._onerror&&a._onerror(a._result),G(a)}function D(a,b){a._state===ga&&(a._result=b,a._state=ha,0!==a._subscribers.length&&Z(G,a))}function E(a,b){a._state===ga&&(a._state=ia,a._result=b,Z(C,a))}function F(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+ha]=c,e[f+ia]=d,0===f&&a._state&&Z(G,a)}function G(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?J(c,d,e,f):e(f);a._subscribers.length=0}}function H(){this.error=null}function I(a,b){try{return a(b)}catch(c){return ka.error=c,ka}}function J(a,b,c,d){var e,f,g,i,j=h(c);if(j){if(e=I(c,d),e===ka?(i=!0,f=e.error,e=null):g=!0,b===e)return void E(b,v())}else e=d,g=!0;b._state!==ga||(j&&g?B(b,e):i?E(b,f):a===ha?D(b,e):a===ia&&E(b,e))}function K(a,b){try{b(function(b){B(a,b)},function(b){E(a,b)})}catch(c){E(a,c)}}function L(a){return new qa(this,a).promise}function M(a){function b(a){B(e,a)}function c(a){E(e,a)}var d=this,e=new d(t);if(!X(a))return E(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===ga&&f>g;g++)F(d.resolve(a[g]),void 0,b,c);return e}function N(a){var b=this,c=new b(t);return E(c,a),c}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Q(a){this._id=oa++,this._state=void 0,this._result=void 0,this._subscribers=[],t!==a&&("function"!=typeof a&&O(),this instanceof Q?K(this,a):P())}function R(a,b){this._instanceConstructor=a,this.promise=new a(t),Array.isArray(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&D(this.promise,this._result))):E(this.promise,this._validationError())}function S(){var a;if("undefined"!=typeof e)a=e;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;c&&"[object Promise]"===Object.prototype.toString.call(c.resolve())&&!c.cast||(a.Promise=pa)}var T;T=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var U,V,W,X=T,Y=0,Z=function(a,b){da[Y]=a,da[Y+1]=b,Y+=2,2===Y&&(V?V(p):W())},$="undefined"!=typeof window?window:void 0,_=$||{},aa=_.MutationObserver||_.WebKitMutationObserver,ba="undefined"!=typeof a&&"[object process]"==={}.toString.call(a),ca="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,da=new Array(1e3);W=ba?k():aa?m():ca?n():void 0===$?q():o();var ea=r,fa=s,ga=void 0,ha=1,ia=2,ja=new H,ka=new H,la=L,ma=M,na=N,oa=0,pa=Q;Q.all=la,Q.race=ma,Q.resolve=fa,Q.reject=na,Q._setScheduler=i,Q._setAsap=j,Q._asap=Z,Q.prototype={constructor:Q,then:ea,"catch":function(a){return this.then(null,a)}};var qa=R;R.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},R.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===ga&&a>c;c++)this._eachEntry(b[c],c)},R.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===fa){var e=w(a);if(e===ea&&a._state!==ga)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===pa){var f=new c(t);A(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){b(a)}),b)}else this._willSettleAt(d(a),b)},R.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===ga&&(this._remaining--,a===ia?E(d,c):this._result[b]=c),0===this._remaining&&D(d,this._result)},R.prototype._willSettleAt=function(a,b){var c=this;F(a,void 0,function(a){c._settledAt(ha,b,a)},function(a){c._settledAt(ia,b,a)})};var ra=S,sa={Promise:pa,polyfill:ra};c(14).amd?(d=function(){return sa}.call(b,c,b,f),!(void 0!==d&&(f.exports=d))):"undefined"!=typeof f&&f.exports?f.exports=sa:"undefined"!=typeof this&&(this.ES6Promise=sa),ra()}).call(this)}).call(b,c(11),function(){return this}(),c(12)(a))},function(a,b){function c(){j=!1,g.length?i=g.concat(i):k=-1,i.length&&d()}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=a.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(a){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(a){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},function(a,b){},function(a,b){a.exports=function(){throw new Error("define cannot be used indirect")}}]);